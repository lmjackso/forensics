{% extends "DFA/base.html" %}

{% block graph-active %} class="active" {% endblock graph-active %}

{% block base-content %}
      <!-- Main component for a primary marketing message or call to action -->

      {% if graph %}
    <link href="/static/css/{{graph}}.css" rel="stylesheet">
    {% endif %}

      <div class="jumbotron">
        {% if data_json %}
              <div class="chart"></div>

        {% else %}

<br>

          <h1>Welcome to DFA</h1>
          Please enter an absolute directory path containing your files and pick a graphical representation option.
<br>
          data = {{data}} <br>
          json data = {{data_json}}<br>
          {{options}}
        {% endif %}       
      </div>

     <div class="col-md-4">

      <form role="form" action="{% url 'home' %}">

        <div class="form-group">
          <label class="sr-only" for="directory">Path to Directory</label>
          <input type="text" class="form-control" name="directory" placeholder="Path to Directory">
        </div>

        <div class="form-group">
          <label class="sr-only" for="disabledSelect">Disabled select menu</label>
          <select class="form-control" id="method" name="method">
            <option>Choose Graphical Representation Method</option>
          <!-- for loop here  -->
          {% for o in options %}
            <option>{{o}}</option>
          {% endfor %}

          </select>        
        </div>

        <div class="form-group" >
          <label class="sr-only" for="disabledSelect">Disabled select menu</label>
          <select class="form-control" id="change" name="type">
          <!-- for loop here  -->
            <option>Select Data Type (after choosing method)</option>
          </select>        
        </div>

        <button type="submit" class="btn btn-default">Create Graph</button>
      </form>
</div>



{% endblock base-content %}

{% block base-scripts %}

<script type="text/javascript">
$(document).ready(function () {

    $("#method").change(function () {

    $.getScript("/static/options/"+$("#method").val()+".js", function(){

       $("#change").find('option').remove().end();
      for (var i=0; i<types.length; i++) {
        $('#change').append(new Option(types[i], types[i]));

      }

       // Here you can use anything you defined in the loaded script
    });
  });

});
</script>


{% endblock base-scripts %}